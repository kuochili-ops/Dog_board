<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manual Coordinate Capture</title>
    <style>
        body { background: #000; color: #00ff00; font-family: monospace; text-align: center; margin: 0; padding: 20px; }
        .stage { position: relative; display: inline-block; cursor: crosshair; border: 2px solid #555; }
        video { display: block; max-width: 100%; height: auto; }
        .click-dot {
            position: absolute;
            width: 10px; height: 10px;
            background: #ff0000;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none;
        }
        #result { margin-top: 20px; background: #222; padding: 15px; border-radius: 8px; word-break: break-all; color: #fff; }
        .guide { margin-bottom: 10px; font-size: 1.1rem; }
    </style>
</head>
<body>

    <div class="guide">步驟：1. 暫停在黑板翻正時刻 | 2. 依序點擊四角 (左上→右上→左下→右下)</div>
    
    <div class="stage" id="stage">
        <video id="v" controls>
            <source src="dog_board.mp4" type="video/mp4">
        </video>
    </div>

    <div id="result">點擊後此處將顯示座標數據...</div>
    <button onclick="resetDots()" style="margin-top:10px; padding:10px;">重置點擊</button>

    <script>
        const stage = document.getElementById('stage');
        const video = document.getElementById('v');
        const result = document.getElementById('result');
        let coords = [];
        const labels = ["左上 (LT)", "右上 (RT)", "左下 (LB)", "右下 (RB)"];

        stage.addEventListener('mousedown', function(e) {
            if (coords.length >= 4) return;

            const rect = stage.getBoundingClientRect();
            // 計算相對於影片容器的百分比位置
            const x = ((e.clientX - rect.left) / rect.width * 100).toFixed(2);
            const y = ((e.clientY - rect.top) / rect.height * 100).toFixed(2);

            coords.push({x, y});

            // 放置紅點
            const dot = document.createElement('div');
            dot.className = 'click-dot';
            dot.style.left = x + '%';
            dot.style.top = y + '%';
            stage.appendChild(dot);

            updateResult();
        });

        function updateResult() {
            if (coords.length === 0) {
                result.innerText = "等待點擊...";
                return;
            }
            let text = "已記錄座標：\n";
            coords.forEach((c, i) => {
                text += `${labels[i]}: { x: ${c.x}%, y: ${c.y}% }\n`;
            });
            if (coords.length === 4) {
                text += "\n--- 請複製下方文字貼回給我 ---\n";
                text += `FINAL_COORDS: LT(${coords[0].x},${coords[0].y}) RT(${coords[1].x},${coords[1].y}) LB(${coords[2].x},${coords[2].y}) RB(${coords[3].x},${coords[3].y})`;
            }
            result.innerText = text;
        }

        function resetDots() {
            coords = [];
            document.querySelectorAll('.click-dot').forEach(d => d.remove());
            updateResult();
        }
    </script>
</body>
</html>
