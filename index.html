<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dog Flip-Board Precise Sync</title>
    <style>
        :root {
            --start-time: 1.2s; /* 配合影片，狗狗開始叼起的精確時間 */
            --duration: 1.6s;   /* 翻轉過程的總時長 */
        }

        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: #1a1a1a;
            color: #eee;
            margin: 0;
            padding: 20px;
        }

        .stage {
            position: relative;
            width: 100%;
            max-width: 800px;
            perspective: 2000px; /* 增加透視深度，讓翻轉更真實 */
        }

        video { width: 100%; display: block; border-radius: 8px; }

        /* --- 模組化文字層：加入背面隱藏技術 --- */
        .flip-text-module {
            position: absolute;
            top: 48.5%; 
            left: 54.8%;
            width: 32%;
            height: 42%;
            
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            color: white;
            font-size: 1.6rem;
            font-weight: bold;
            pointer-events: none;

            /* 核心修正 1：設定旋轉中心在黑板上緣 */
            transform-origin: top center;

            /* 核心修正 2：關鍵！背面朝向觀眾時隱藏文字 */
            backface-visibility: hidden; 
            -webkit-backface-visibility: hidden;

            /* 初始狀態：完全倒貼在黑板背面 (旋轉 180度) */
            transform: translate(-50%, -50%) rotateX(180deg);
            opacity: 0;
        }

        /* 核心修正 3：動畫路徑模擬黑板從背面翻到正面的軌跡 */
        @keyframes preciseFlip {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) rotateX(180deg);
            }
            /* 當翻轉過半 (90度) 之後，字體才會因為 backface-visibility 開始顯現 */
            50% {
                opacity: 1;
                transform: translate(-50%, -50%) rotateX(90deg);
            }
            100% {
                opacity: 1;
                transform: translate(-50%, -50%) rotateX(0deg);
            }
        }

        .run-animation {
            animation: preciseFlip var(--duration) linear forwards;
            animation-delay: var(--start-time);
        }

        .controls { margin-top: 20px; }
        input { padding: 10px; border-radius: 4px; border: none; width: 250px; }
        button { padding: 10px 20px; cursor: pointer; background: #f39c12; border: none; border-radius: 4px; color: white; }
    </style>
</head>
<body>

    <div class="stage">
        <video id="dogVideo">
            <source src="dog_board.mp4" type="video/mp4">
        </video>
        <div id="textLayer" class="flip-text-module"></div>
    </div>

    <div class="controls">
        <input type="text" id="userInput" placeholder="輸入要刻在黑板上的話...">
        <button onclick="play()">播放動畫</button>
    </div>

    <script>
        const v = document.getElementById('dogVideo');
        const t = document.getElementById('textLayer');
        const i = document.getElementById('userInput');

        function play() {
            t.innerText = i.value || "這下對了吧！";
            
            // 重置
            t.classList.remove('run-animation');
            v.currentTime = 0;
            void t.offsetWidth; // 強制重繪
            
            // 執行
            v.play();
            t.classList.add('run-animation');
        }
    </script>
</body>
</html>
