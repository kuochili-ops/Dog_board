<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blackboard Vertex Tracker</title>
    <style>
        body { background: #111; color: white; margin: 0; display: flex; flex-direction: column; align-items: center; font-family: sans-serif; }
        .stage { position: relative; width: 100%; max-width: 800px; overflow: hidden; }
        video { width: 100%; display: block; }

        /* 紅點樣式 */
        .dot {
            position: absolute;
            width: 8px;
            height: 8px;
            background: red;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            z-index: 100;
            box-shadow: 0 0 10px red;
            opacity: 0;
            pointer-events: none;
        }

        /* 追蹤動畫：針對 dog_board.mp4 的四個角進行逆向紀錄 */
        /* 我們以影片寬高百分比來定位 */

        /* 左上角 (支點) */
        @keyframes track-lt {
            0% { opacity: 0; top: 48%; left: 45%; }
            40% { opacity: 1; top: 44%; left: 42%; }
            100% { opacity: 1; top: 34%; left: 41%; }
        }
        /* 右上角 */
        @keyframes track-rt {
            0% { opacity: 0; top: 48%; left: 55%; }
            40% { opacity: 1; top: 44%; left: 63%; }
            100% { opacity: 1; top: 38%; left: 71%; }
        }
        /* 左下角 */
        @keyframes track-lb {
            0% { opacity: 0; top: 48%; left: 45%; }
            40% { opacity: 1; top: 58%; left: 38%; }
            100% { opacity: 1; top: 76%; left: 38%; }
        }
        /* 右下角 */
        @keyframes track-rb {
            0% { opacity: 0; top: 48%; left: 55%; }
            40% { opacity: 1; top: 58%; left: 68%; }
            100% { opacity: 1; top: 72%; left: 73%; }
        }

        .active #dot-lt { animation: track-lt 3.5s linear forwards; }
        .active #dot-rt { animation: track-rt 3.5s linear forwards; }
        .active #dot-lb { animation: track-lb 3.5s linear forwards; }
        .active #dot-rb { animation: track-rb 3.5s linear forwards; }

        .controls { padding: 20px; }
        button { padding: 12px 24px; background: #ff4757; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>

    <div id="wrapper" class="stage">
        <video id="v" playsinline webkit-playsinline muted>
            <source src="dog_board.mp4" type="video/mp4">
        </video>
        
        <div id="dot-lt" class="dot"></div>
        <div id="dot-rt" class="dot"></div>
        <div id="dot-lb" class="dot"></div>
        <div id="dot-rb" class="dot"></div>
    </div>

    <div class="controls">
        <button onclick="startTracking()">播放並觀察紅點軌跡</button>
    </div>

    <script>
        const v = document.getElementById('v');
        const w = document.getElementById('wrapper');

        function startTracking() {
            w.classList.remove('active');
            v.pause();
            v.currentTime = 0;
            
            void w.offsetWidth; // 觸發重繪
            
            v.play();
            w.classList.add('active');
        }
    </script>
</body>
</html>
