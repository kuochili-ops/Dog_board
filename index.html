<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dog Flip-Board Pro Module</title>
    <style>
        :root {
            --flip-duration: 1.5s; /* 翻轉動畫時長 */
            --start-delay: 1.0s;  /* 配合影片中狗狗開始叼起的秒數 */
        }

        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: #222;
            color: #fff;
            font-family: sans-serif;
            margin: 0;
            padding: 20px;
        }

        .stage {
            position: relative;
            width: 100%;
            max-width: 800px;
            /* 關鍵：設置透視深度，讓 3D 旋轉產生近大遠小的效果 */
            perspective: 1500px; 
            border-radius: 10px;
            overflow: hidden;
        }

        video {
            width: 100%;
            display: block;
        }

        /* --- 模組化：黏貼在黑板上的文字層 --- */
        .blackboard-text-module {
            position: absolute;
            /* 根據影片黑板位置微調 */
            top: 50%;
            left: 55%;
            width: 32%;
            height: 42%;
            
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
            box-sizing: border-box;
            
            color: white;
            font-size: 1.8rem;
            text-align: center;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);

            /* 關鍵：旋轉中心設在頂部，模擬吊繩支點 */
            transform-origin: top center;
            pointer-events: none;
            
            /* 初始狀態：平躺並透明 */
            transform: translate(-50%, -50%) rotateX(-90deg);
            opacity: 0;
        }

        /* 文字隨黑板翻動的動畫關鍵影格 */
        @keyframes boardFlipAnimation {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) rotateX(-90deg) rotateY(15deg);
            }
            20% {
                opacity: 1;
            }
            100% {
                opacity: 1;
                /* 最終狀態：與影片黑板同步的微偏轉角度 */
                transform: translate(-50%, -50%) rotateX(0deg) rotateY(5deg);
            }
        }

        .is-animating {
            animation: boardFlipAnimation var(--flip-duration) cubic-bezier(0.4, 0, 0.2, 1) forwards;
            animation-delay: var(--start-delay);
        }

        .input-group {
            margin-top: 20px;
            display: flex;
            gap: 10px;
        }

        input {
            padding: 12px;
            border-radius: 6px;
            border: none;
            width: 200px;
        }

        button {
            padding: 12px 20px;
            background: #ff4757;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <div class="stage">
        <video id="dogVid">
            <source src="dog_board.mp4" type="video/mp4">
        </video>

        <div id="boardMsg" class="blackboard-text-module"></div>
    </div>

    <div class="input-group">
        <input type="text" id="userInput" placeholder="輸入要寫在黑板上的字...">
        <button onclick="playDogAction()">執行翻轉</button>
    </div>

    <script>
        /**
         * 狗狗黑板動畫控制模組
         */
        const video = document.getElementById('dogVid');
        const board = document.getElementById('boardMsg');
        const input = document.getElementById('userInput');

        function playDogAction() {
            // 1. 設置使用者輸入的文字
            board.innerText = input.value || "汪汪！";
            
            // 2. 重置影片與動畫狀態
            board.classList.remove('is-animating');
            video.currentTime = 0;
            
            // 強制瀏覽器重繪，確保動畫能重新觸發
            void board.offsetWidth; 
            
            // 3. 開始播放
            video.play();
            board.classList.add('is-animating');
        }
    </script>
</body>
</html>
