<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Dog Blackboard Inverse Sync</title>
    <style>
        body {
            background: #000;
            color: white;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            font-family: sans-serif;
        }

        .video-stage {
            position: relative;
            width: 100%;
            max-width: 800px;
            /* 模擬相機透視 */
            perspective: 1000px;
            overflow: hidden;
        }

        video {
            width: 100%;
            display: block;
        }

        /* 文字貼紙層：透明底白色字 */
        #textSticker {
            position: absolute;
            /* 定位基準點設在黑板中心大致位置 */
            top: 52%;
            left: 54%;
            width: 32%;
            height: 40%;
            
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            
            /* 修正手機渲染：防止 z-fighting 並開啟 3D */
            transform-style: preserve-3d;
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
            
            /* 初始狀態：完全水平且透明 */
            transform: translate(-50%, -50%) rotateX(-90deg);
            opacity: 0;
            pointer-events: none;
        }

        /* 逆向紀錄的運動軌跡動畫 */
        @keyframes followBoard {
            0% { 
                opacity: 0; 
                transform: translate(-50%, -50%) rotateX(-90deg) scaleY(0.1); 
            }
            /* 1.2s: 剛被叼起，角度極斜 */
            30% { 
                opacity: 1; 
                transform: translate(-51%, -52%) rotateX(-70deg) rotateY(10deg) rotateZ(-2deg); 
            }
            /* 2.0s: 翻轉至中間過程 */
            60% { 
                opacity: 1; 
                transform: translate(-52%, -54%) rotateX(-30deg) rotateY(12deg) rotateZ(-1deg); 
            }
            /* 2.8s: 最終畫面（逆向分析的基準點） */
            100% { 
                opacity: 1; 
                /* 最終角度：微偏 Y 軸以符合影片中黑板的透視 */
                transform: translate(-53%, -55%) rotateX(0deg) rotateY(10deg) rotateZ(0deg); 
            }
        }

        .active-anim {
            animation: followBoard 3.2s cubic-bezier(0.2, 0, 0.3, 1) forwards;
        }

        .ui { padding: 20px; width: 100%; box-sizing: border-box; max-width: 400px; }
        input { width: 100%; padding: 12px; margin-bottom: 10px; border-radius: 8px; border: none; font-size: 16px; }
        button { width: 100%; padding: 12px; background: #fff; color: #000; border: none; border-radius: 8px; font-weight: bold; }
    </style>
</head>
<body>

    <div class="video-stage">
        <video id="dogVideo" playsinline webkit-playsinline muted>
            <source src="dog_board.mp4" type="video/mp4">
        </video>
        <div id="textSticker"></div>
    </div>

    <div class="ui">
        <input type="text" id="userInput" placeholder="輸入要加註的文字...">
        <button onclick="run()">執行同步翻轉</button>
    </div>

    <script>
        const v = document.getElementById('dogVideo');
        const s = document.getElementById('textSticker');
        const i = document.getElementById('userInput');

        function run() {
            s.innerText = i.value || "這下對了吧！";
            
            // 強制重啟動畫與影片
            s.classList.remove('active-anim');
            v.pause();
            v.currentTime = 0;
            
            void s.offsetWidth; 
            
            v.play();
            s.classList.add('active-anim');
        }
    </script>
</body>
</html>
